# è‡ªå®šä¹‰ Quantumult-X é…ç½®ç¤ºä¾‹

# ä»¥ ";" æˆ– "#" æˆ– "//" å¼€å¤´çš„è¡Œä¸ºæ³¨é‡Šè¡Œã€‚
# SS-URI scheme can be found at https://shadowsocks.org/en/spec/SIP002-URI-Scheme.html


[general]
# å»ºè®®åœ¨ã€Œå…¶ä»–è®¾ç½®ã€é‡Œã€ŒGeoLite2ã€çš„ã€Œæ¥æºã€å¡«å†™ä½¿ç”¨ã€Œ https://cdn.jsdelivr.net/gh/Loyalsoldier/geoip@release/Country.mmdb ã€å¹¶å¼€å¯ã€Œè‡ªåŠ¨æ›´æ–°ã€

;profile_img_url =http://www.example.com/example.png

# èµ„æºè§£æå™¨
;resource_parser_url=https://raw.githubusercontent.com/crossutility/Quantumult-X/master/resource-parser.js
resource_parser_url=https://cdn.jsdelivr.net/gh/KOP-XIAO/QuantumultX@master/Scripts/resource-parser.js

;network_check_url =http://bing.com

# Quantumult ä½¿ç”¨ HEAD æ–¹æ³•å°† HTTP è¯·æ±‚å‘é€åˆ°æœåŠ¡å™¨æ£€æŸ¥ url æ¥æµ‹è¯•ä»£ç†çš„çŠ¶æ€ï¼Œç»“æœåº”è¯¥æ˜¯ä¸¤ä¸ªå»¶è¿Ÿï¼Œç¬¬ä¸€ä¸ªæ˜¯ TCP ä¸ä»£ç†æœåŠ¡å™¨çš„æ¡æ‰‹ï¼Œç¬¬äºŒä¸ªæ˜¯ Quantumult æˆåŠŸåœ°ä»æœåŠ¡å™¨æ£€æŸ¥ url æ¥æ”¶ HTTP å“åº”çš„æ€»æ—¶é—´ã€‚é—ªç”µå›¾æ ‡è¡¨ç¤º TCP Fast Open æˆåŠŸã€‚å¦‚æœ [server_local] æˆ– [server_remote] ä¸­çš„æœåŠ¡å™¨æœ‰è‡ªå·±çš„ server_check_urlï¼Œåˆ™ä¼šç”¨è‡ªå·±çš„ server_check_url ä»£æ›¿ [general] ä¸­çš„ server_check_urlã€‚
# Quantumult ä½¿ç”¨ HTTP HEAD æ–¹æ³•å¯¹æµ‹è¯•ç½‘å€ server_check_url è¿›è¡Œç½‘é¡µå“åº”æ€§æµ‹è¯•(æµ‹è¯•ç»“æœä¸ºé€šè¿‡è¯¥èŠ‚ç‚¹è®¿é—®æ­¤ç½‘é¡µè·å¾— HTTP å“åº”æ‰€éœ€è¦çš„æ—¶é—´)ï¼Œæ¥ç¡®è®¤èŠ‚ç‚¹çš„å¯ç”¨æ€§ã€‚
# Quantumult ç•Œé¢ä¸­çš„å»¶è¿Ÿæµ‹è¯•æ–¹å¼å‡ä¸ºç½‘é¡µå“åº”æ€§æµ‹è¯•ï¼Œæ˜¾ç¤ºçš„æœ€ç»ˆå»¶è¿Ÿå‡ä¸ºé€šè¿‡å¯¹åº”èŠ‚ç‚¹è®¿é—®æµ‹è¯•ç½‘é¡µè·å¾— HTTP å“åº”æ‰€éœ€è¦æ—¶é—´ã€‚
# ç”±äº Trojan åè®®ä¸ºæ— å“åº”æ ¡éªŒåè®®ï¼Œä½¿å¾— HTTP æ£€æµ‹æ–¹å¼å³ä½¿è·å¾—äº† HTTP å“åº”ï¼Œä¹Ÿä¸ä»£è¡¨èŠ‚ç‚¹ä¸€å®šå¯ç”¨ã€‚
;server_check_url =http://www.google.com/generate_204
server_check_url=http://cp.cloudflare.com/generate_204

;server_check_user_agent = Agent/1.0

# åªæœ‰å°äºæˆ–ç­‰äº 5000ï¼ˆæ¯«ç§’ï¼‰æ—¶æ‰ä¼šè€ƒè™‘ server_check_timeout å€¼ã€‚è¯¥å€¼ä¸åŒ…æ‹¬ DNS æŸ¥è¯¢ã€TCP æ¡æ‰‹ã€TLS æ¡æ‰‹å’Œåº”ç”¨å±‚ HTTP ä¼šè¯æŒç»­æ—¶é—´åœ¨å†…çš„æ£€æŸ¥è¿‡ç¨‹çš„æ€»æŒç»­æ—¶é—´è¿›è¡Œæ¯”è¾ƒï¼Œå› æ­¤æ€»æŒç»­æ—¶é—´å¯èƒ½æ˜æ˜¾é•¿äºâ€œTCP æ¡æ‰‹â€å’Œâ€œHTTP ä¼šè¯æŒç»­æ—¶é—´â€ .
;server_check_timeout = 5000

;doh_user_agent = Agent/1.0

;geo_location_checker = http://www.example.com/json/, https://www.example.com/script.js
geo_location_checker=http://ip-api.com/json/?lang=zh-CN, https://cdn.jsdelivr.net/gh/KOP-XIAO/QuantumultX@master/Scripts/IP_API.js

# åœ¨ç½‘ç»œç¯å¢ƒåˆ‡æ¢æ—¶å‡ºå‘è¿è¡Œæ¨¡å¼å˜æ›´
# filter - è§„åˆ™åˆ†æµï¼Œall_proxy - å…¨éƒ¨ä»£ç†ï¼Œall_direct - å…¨éƒ¨ç›´è¿
# ç¤ºä¾‹æ„æ€ï¼š[èœ‚çªæ•°æ®],[Wi-Fi],[SSID]
# ä¸‹åˆ—ç¤ºä¾‹çš„æ„æ€ä¸ºï¼šåœ¨èœ‚çªæ•°æ®ä½¿ç”¨è§„åˆ™åˆ†æµ(ç¬¬ä¸€ä¸ª filter)ï¼Œåœ¨ Wi-Fi ä½¿ç”¨è§„åˆ™åˆ†æµ(ç¬¬äºŒä¸ª filter)ï¼Œåœ¨ SSID ä¸º LINK_22E171 çš„ Wi-Fi ä½¿ç”¨å…¨éƒ¨ä»£ç†ï¼Œï¼Œåœ¨ SSID ä¸º LINK_22E172 çš„ Wi-Fi ä½¿ç”¨å…¨éƒ¨ç›´è¿
# Rewrite åŠ Task æ¨¡å—å§‹ç»ˆç”Ÿæ•ˆ
;running_mode_trigger = filter, filter, LINK_22E171:all_proxy, LINK_22E172:all_direct
running_mode_trigger=filter, filter, LY-Dormitory:all_direct, LY-Office:filter, æŸ³æ¨çš„iPhone:all_direct

# dns_exclusion_list åŒ…å«äº†ç¦ç”¨å ä½ç¬¦ IP(198.18.0.0/15) çš„åŸŸã€‚ä¸åœ¨ dns_exclusion_list ä¸­çš„åŸŸå¯ç”¨äº†å ä½ç¬¦ IP æ˜ å°„æœºåˆ¶ï¼Œå¹¶æ‰“å¼€äº† resolve-on-remote è®¾ç½®ã€‚ dns_exclusion_list ä¸­åŸŸçš„ DNS æŸ¥è¯¢å¯èƒ½ä¼šä¹Ÿå¯èƒ½ä¸ä¼šéµå¾ª [dns] éƒ¨åˆ†ä¸­çš„è®¾ç½®ã€‚
dns_exclusion_list = *.cmpassport.com, *.jegotrip.com.cn, *.icitymobile.mobi, id6.me

# é»˜è®¤æƒ…å†µä¸‹ï¼ˆâ€œloopbackâ€ï¼‰ï¼Œå½“åŸŸåœ¨ DNS çº§åˆ«æ‹’ç»æ—¶ï¼Œå°†è¿”å›ç¯å› IP å“åº”ï¼Œæ‚¨å¯ä»¥é€šè¿‡å°† dns_reject_domain_behavior è®¾ç½®ä¸º no-error-no-answer æˆ– nxdomain æ¥æ›´æ”¹æ­¤è¡Œä¸ºã€‚è¿™ä¼šå°†è¡Œä¸ºæ›´æ”¹ä¸ºå“åº” NOERROR NOANSWER å“åº”æˆ–å“åº” NXDOMAIN å“åº”ã€‚å¦‚æœæ‚¨å°†æ‹’ç»çš„åŸŸæ›´æ”¹ä¸ºéæ‹’ç»ï¼ˆé€šè¿‡æ›´æ”¹é…ç½®ã€è¿‡æ»¤å™¨æˆ–ç­–ç•¥ï¼‰ï¼Œæœ€å¤šå¯èƒ½éœ€è¦ 10 ç§’æ‰èƒ½ç”Ÿæ•ˆï¼ˆTTL 10ï¼‰ã€‚
;dns_reject_domain_behavior = loopback

# åœ¨ç‰¹å®š SSID ç½‘ç»œæ—¶(é™¤äº† Task æ¨¡å—)æš‚åœ Quantumult X
;ssid_suspended_list = LY-Dormitory, LY-Office

# å‚æ•° udp_whitelist ä» IP å±‚æ§åˆ¶ UDP æ•°æ®æ˜¯å¦éœ€è¦èˆå¼ƒï¼›å¦‚èˆå¼ƒï¼Œåˆ™è¯¥ UDP è¯·æ±‚ä¸ä¼šè¿›å…¥è§„åˆ™æ¨¡å—ä»¥åŠç­–ç•¥æ¨¡å—ï¼ŒTCP/UDP è¯·æ±‚è®°å½•ä¸­ä¹Ÿä¸ä¼šæœ‰ç›¸åº”çš„æ¡ç›®ï¼Œä½†ä»å¯åœ¨æ—¥å¿—ä¸­æŸ¥è¯¢åˆ°ç›¸å…³ä¿¡æ¯ï¼ˆæ—¥å¿—ç­‰çº§ debugï¼‰ã€‚
# è¯¥å‚æ•°æ§åˆ¶çš„æ˜¯æµå…¥ Quantumult X Tunnel çš„è¯·æ±‚ï¼Œå¹¶é Quantumult X Tunnel å‘å‡ºçš„è¯·æ±‚ï¼Œå³ä¸ä¼šä½œç”¨äºèŠ‚ç‚¹æ‰€ä½¿ç”¨çš„ UDP ç›®æ ‡ç«¯å£ã€‚
;udp_whitelist = 53, 123, 1900, 80-443

# udp_drop_list åŒ…å«ç›®çš„ UDP ç«¯å£ï¼Œæœºåˆ¶ç±»ä¼¼äº udp_whitelist ä¸¢å¼ƒ UDP æ•°æ®åŒ…ï¼Œä½†ä¸ä¼šå‘å› ICMP æ¶ˆæ¯ã€‚åªæœ‰ udp_whitelist å…è®¸çš„ UDP æ•°æ®åŒ…æ‰èƒ½è¢« udp_drop_list æ•è·ã€‚
;udp_drop_list = 1900, 80

# Quantumult å°†ä¸ä¼šå¤„ç†åˆ° excluded_routes çš„æµé‡ã€‚ä¿®æ”¹åæœ€å¥½é‡æ–°å¯åŠ¨æ‚¨çš„è®¾å¤‡ã€‚
;excluded_routes = 192.168.0.0/16, 172.16.0.0/12, 100.64.0.0/10, 10.0.0.0/8

;icmp_auto_reply = true


[dns]
# æŸ¥è¯¢ç»“æœåªç”¨äºè¯„ä¼°è¿‡æ»¤å™¨æˆ–é€šè¿‡ç›´æ¥ç­–ç•¥è¿æ¥ï¼Œå½“é€šè¿‡æœåŠ¡å™¨è¿æ¥æ—¶ï¼ŒæŸ¥è¯¢ç»“æœä¸ä¼šè¢«ä½¿ç”¨ï¼ŒQuantumult æ°¸è¿œä¸ä¼šçŸ¥é“ç›¸å…³åŸŸåçš„ç›®æ ‡ IPã€‚
# å¦‚æœæ‚¨æƒ³è®©æŸä¸ªåŸŸå(ä¾‹å¦‚ï¼šexample.com)ä¸º 127.0.0.0.1ï¼Œåªéœ€åœ¨ã€Œfilter_localã€éƒ¨åˆ†æ·»åŠ ã€Œhost, example.com, rejectã€å³å¯ã€‚æ‹’ç»æ“ä½œå°†è¿”å› 127.0.0.0.1 çš„ DNS å“åº”ã€‚

# å½“è®¾ç½® prefer-doh3 æ—¶ï¼ŒDoH æŸ¥è¯¢å°†å°è¯• DNS over HTTP3ï¼Œå¦‚æœå¤±è´¥åˆ™æŸ¥è¯¢è¿æ¥å°†å›é€€åˆ° HTTP2ã€‚ç”±äº HTTP/2 å’Œ HTTP/3 è¿æ¥æ”¯æŒå¤šè·¯å¤ç”¨ï¼Œå› æ­¤å½“æ‚¨æ›´æ”¹æ­¤è®¾ç½®æ—¶ï¼Œå¯èƒ½ä¸ä¼šç«‹å³ç”Ÿæ•ˆï¼Œä½†æ‚¨å¯ä»¥é‡æ–°è¿æ¥ Quantumult X Tunnel æˆ–æ‰‹åŠ¨æ›´æ”¹ç½‘ç»œç¯å¢ƒä½¿å…¶ç«‹å³ç”Ÿæ•ˆã€‚
prefer-doh3

# ä¸ºäº†æé«˜æ€§èƒ½ï¼Œä¼šä½¿ç”¨ä»å½“å‰ç½‘ç»œï¼ˆç³»ç»Ÿï¼‰ä¸­è·å–çš„ DNS æœåŠ¡å™¨ï¼ˆæ‚¨å¯ä»¥ä½¿ç”¨ no-system ç¦ç”¨æ­¤åŠŸèƒ½ï¼Œä½†è‡³å°‘è¦å¢åŠ ä¸€ä¸ªè‡ªå®šä¹‰çš„ DNS æœåŠ¡å™¨å¦‚ï¼šserver=223.5.5.5ï¼‰ã€‚
no-system

# å½“è®¾ç½® no-ipv6 æ—¶ï¼ŒQuantumult X Tunnel çš„ DNS æ¨¡å—ä¼šç›´æ¥è®© AAAA æŸ¥è¯¢å¤±è´¥ï¼Œä½†ä»ç„¶å…è®¸æ¥è‡ª IPv6 DNS æœåŠ¡å™¨çš„ A æŸ¥è¯¢ã€‚
;no-ipv6

# è‡ªå®šä¹‰ DNS
;server = 8.8.8.8
;server = 8.8.8.8:53, excluded_ssids=SSID1
;server = 8.8.4.4:53, included_ssids=SSID2
;server = /example0.com/system
;server = /example1.com/8.8.4.4
;server = /*.example2.com/223.5.5.5
;server = /example4.com/[2001:4860:4860::8888]:53
server = 119.29.29.29
server = [2402:4e00::]
server = 223.5.5.5
server = [2400:3200::1]

# å½“ DoH æœåŠ¡å™¨è¢«è®¾ç½®æ—¶ï¼Œæ‰€æœ‰å…¶ä»–æ™®é€šçš„ï¼ˆæ²¡æœ‰ä¸ä¹‹ç›¸å…³çš„ç‰¹å®šåŸŸï¼‰æœåŠ¡å™¨å°†è¢«å¿½ç•¥ã€‚
# å¤šä¸ªï¼ˆå¹¶å‘æŸ¥è¯¢ï¼‰DoH æœåŠ¡å™¨åº”è¯¥é…ç½®åœ¨ä¸€è¡Œä¸­ï¼Œå¹¶ä¸” URL åº”è¯¥ç”¨é€—å·åˆ†éš”ã€‚å¦‚æœ iOS ç‰ˆæœ¬ < iOS 13.0ï¼ŒDoH çš„æœ€å¤§æ•°é‡å°†è¢«é™åˆ¶ä¸º 1ã€‚å¦‚æœ iOS ç‰ˆæœ¬ < iOS 15.0ï¼ŒDoH çš„æœ€å¤§æ•°é‡å°†è¢«é™åˆ¶ä¸º 2ã€‚
# å½“ä½¿ç”¨çš„ DoH æœåŠ¡å™¨ä¸æ˜¯åŸºäº HTTP/2 æ—¶ï¼ŒDoH å°†è¢«æš‚æ—¶ç¦ç”¨ï¼Œå¹¶ä½¿ç”¨å¸¸è§„æœåŠ¡å™¨ï¼Œç›´åˆ°ä¸‹æ¬¡å¯åŠ¨ VPN è¿æ¥ã€‚
;doh-server = https://dns.alidns.com/dns-query
;doh-server = https://exmaple1.com/dns-query, https://exmaple2.com/dns-query
;doh-server = https://223.6.6.6/dns-query, excluded_ssids=SSID1
;doh-server = https://223.5.5.5/dns-query, included_ssids=SSID2
;doh-server = /*.example3.com/https://doh.pub/dns-query, excluded_ssids=SSID2
doh-server = https://doh.pub/dns-query, https://dns.alidns.com/dns-query

# å½“ DoQ æœåŠ¡å™¨è¢«è®¾ç½®æ—¶ï¼Œæ‰€æœ‰ DoH æœåŠ¡å™¨å’Œå…¶ä»–æ™®é€šçš„ï¼ˆæ²¡æœ‰ä¸ä¹‹ç›¸å…³çš„ç‰¹å®šåŸŸï¼‰æœåŠ¡å™¨å°†è¢«å¿½ç•¥ã€‚
# å¤šä¸ªï¼ˆå¹¶å‘æŸ¥è¯¢ï¼‰DoQ æœåŠ¡å™¨åº”è¯¥é…ç½®åœ¨ä¸€è¡Œä¸­ï¼Œå¹¶ä¸” URL åº”è¯¥ç”¨é€—å·åˆ†éš”ã€‚
# DoQ çš„é»˜è®¤ç«¯å£æ˜¯ 853ï¼Œå¦‚æœåŒæ–¹åŒæ„ä½¿ç”¨å¦ä¸€ä¸ªç«¯å£ï¼Œä¾‹å¦‚ 456ï¼Œæ‚¨å¯ä»¥å°†å…¶è®¾ç½®ä¸º quic://dns.example.com:456
;doq-server = quic://dns.adguard.com
;doq-server = quic://dns1.example.com, quic://dns2.example.com
;doq-server = quic://dns.adguard.com, excluded_ssids=SSID1
;doq-server = quic://dns.adguard.com, included_ssids=SSID2
;doq-server = /*.example4.com/quic://dns.adguard.com, excluded_ssids=SSID3

;address = /example5.com/192.168.16.18
;address = /example6.com/[2001:8d3:8d3:8d3:8d3:8d3:8d3:8d3]

;alias = /example7.com/another-example.com


[policy]
# resource-tag-regex åŠ server-tag-regex ä»…é€‚ç”¨äº staticã€available å’Œ round-robin ç±»å‹çš„ç­–ç•¥ã€‚

# é™æ€(static)ç­–ç•¥ æŒ‡å‘æ‚¨æ‰‹åŠ¨é€‰æ‹©çš„å€™é€‰æœåŠ¡å™¨ã€‚
;static = policy-name-1, Sample-A, Sample-B, Sample-C, img-url=http://example.com/icon.png
;static = policy-name-5, resource-tag-regex=^sample, server-tag-regex=^example, img-url=http://example.com/icon.png
;static=Apple, direct, proxy, img-url=https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Apple.png
;static=GoogleCN, direct, proxy, img-url=https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Google.png
;static=Global, proxy, direct, img-url=https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Global.png
;static=GFW, proxy, direct, img-url=https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Global.png

# å¯ç”¨(available)ç­–ç•¥ æŒ‡å‘å€™é€‰æœåŠ¡å™¨çš„ç¬¬ä¸€ä¸ªå¯ç”¨æœåŠ¡å™¨ï¼ˆå½“ç­–ç•¥è¢«è§¦å‘ä¸”ç­–ç•¥ç»“æœä¸å¯ç”¨æ—¶ï¼Œå°†ç«‹å³å¯åŠ¨å¹¶å‘ url å»¶è¿Ÿæµ‹è¯•ã€‚å¦‚æœå½“æ—¶æ²¡æœ‰ç½‘ç»œè¯·æ±‚æ¥å—ç­–ç•¥ï¼Œè¿™æ„å‘³ç€ç­–ç•¥å¤„äºç©ºé—²çŠ¶æ€ï¼Œå³ä½¿æœåŠ¡å™¨å…³é—­ï¼Œæµ‹è¯•ä¹Ÿä¸ä¼šå¯åŠ¨ã€‚é‚£æ—¶ï¼Œæ‚¨å¯ä»¥é€šè¿‡æ‰‹åŠ¨å¯åŠ¨æµ‹è¯•æ¥æ›´æ–°æœåŠ¡å™¨çŠ¶æ€ï¼Œä½†æ˜¯è¿™æ²¡æœ‰ä»»ä½•æ„ä¹‰ï¼‰ã€‚
;available = policy-name-2, Sample-A, Sample-B, Sample-C
;available = policy-name-6, resource-tag-regex=^sample, server-tag-regex=^example

# è´Ÿè½½å‡è¡¡(round-robin)ç­–ç•¥ æŒ‡å‘åœ¨å€™é€‰æœåŠ¡å™¨ä¸­æŒ‡å‘ä¸‹ä¸€ä¸ªæœåŠ¡å™¨ä»¥è¿›è¡Œä¸‹ä¸€æ¬¡è¿æ¥ã€‚
;round-robin = policy-name-3, Sample-A, Sample-B, Sample-C
;round-robin = policy-name-7, resource-tag-regex=^sample, server-tag-regex=^example

# SSID ç­–ç•¥ æ ¹æ®ç½‘ç»œç¯å¢ƒçš„ä¸åŒæŒ‡å‘æœåŠ¡å™¨ã€‚
;ssid = policy-name-4, Sample-A, Sample-B, LINK_22E171:Sample-B, LINK_22E172:Sample-C

# dest-hash ç­–ç•¥ æ ¹æ®ä½¿ç”¨ç›®æ ‡åœ°å€ï¼ˆåŸŸæˆ– IPï¼‰ä½œä¸ºè¾“å…¥çš„å“ˆå¸Œå‡½æ•°æŒ‡å‘æœåŠ¡å™¨ã€‚æ­¤ç­–ç•¥å¯¹äºéœ€è¦ä¼šè¯æŒä¹…æ€§çš„ç”¨ä¾‹ç‰¹åˆ«æœ‰ç”¨ã€‚ä»ç­–ç•¥ä¸­æ·»åŠ æˆ–åˆ é™¤æœåŠ¡å™¨å¯èƒ½ä¼šæ”¹å˜ç»“æœã€‚
;dest-hash = policy-name-8, resource-tag-regex=^sample, server-tag-regex=^example
dest-hash = ğŸ‡ºğŸ‡³Proxy, AkkoCloud, CloudCone

# å»¶è¿Ÿæµ‹è¯•(url-latency-benchmark)ç­–ç•¥ æŒ‡å‘å…·æœ‰æœ€ä½³ URL å»¶è¿Ÿ(å…¬å·®ï¼Œå•ä½æ¯«ç§’)ç»“æœçš„æœåŠ¡å™¨ã€‚å½“ç”¨æˆ·åœ¨ Quantumult X ä¸­æ‰‹åŠ¨å¯åŠ¨ URL æµ‹è¯•æ—¶ï¼Œç­–ç•¥ç»“æœä¹Ÿä¼šè¢«æ›´æ–°ã€‚è¯¥ç±»å‹çš„ç­–ç•¥æœ‰ä¸€ä¸ªåä¸º check-interval(ç§’) çš„å‚æ•°ï¼Œå¦‚æœæ­¤ç­–ç•¥å·²ç»è¢«ä»»ä½•è¯·æ±‚æ¿€æ´»ï¼Œåˆ™å°†è€ƒè™‘è¯¥é—´éš”ã€‚å¦‚æœæ´»åŠ¨æ£€æŸ¥ä¸ºçœŸï¼Œåˆ™å³ä½¿ç­–ç•¥å¤„äºç©ºé—²çŠ¶æ€ï¼Œä»å°†è€ƒè™‘é—´éš”å¹¶å¯åŠ¨åŸºå‡†æµ‹è¯•ã€‚
;url-latency-benchmark = policy-name-9, resource-tag-regex=^sample, server-tag-regex=^example, check-interval=600, alive-checking=false, tolerance=0


[server_remote]
# å‚æ•°ã€Œtagã€å’Œã€Œenabledã€æ˜¯å¯é€‰çš„ã€‚
# å„ç§è¿œç¨‹èµ„æºçš„é»˜è®¤åŒæ­¥æ—¶é—´é—´éš”æ˜¯ 86400 ç§’ã€‚
# ä½ å¯ä»¥è®¾ç½® update-interval=172800 æ¥è‡ªå®šä¹‰ä½ çš„è‡ªåŠ¨åŒæ­¥æ—¶é—´é—´éš”(ç§’)ï¼Œè´Ÿæ•°è¡¨ç¤ºç¦ç”¨è‡ªåŠ¨åŒæ­¥ã€‚
# å¦‚æœè®¾ç½®äº† require-devicesï¼Œåˆ™ä»…å½“å½“å‰ Quantumult è®¾å¤‡ ID å±äº require-devices æ—¶æ‰ä¼šåŠ è½½æ­¤è¡Œé…ç½®ã€‚ Quantumult è®¾å¤‡ ID å¯åœ¨â€œè®¾ç½® -å…¶ä»–è®¾ç½® -å…³äºâ€ä¸­æ‰¾åˆ°ã€‚

;https://raw.githubusercontent.com/crossutility/Quantumult-X/master/server.snippet, tag=Sample-01
;https://raw.githubusercontent.com/crossutility/Quantumult-X/master/server.snippet, opt-parser=true, tag=Sample-01
;https://raw.githubusercontent.com/crossutility/Quantumult-X/master/server.snippet, update-interval=-1, tag=Sample-01
;https://raw.githubusercontent.com/crossutility/Quantumult-X/master/server-complete.snippet, tag=Sample-02, as-policy=static, img-url=http://example.com/icon.png, enabled=false
;https://example.com/server.snippet, tag=Sample-03, img-url=http://example.com/icon.png, require-devices=ID1, ID2, enabled=false
servers.snippet, tag=VPS, update-interval=86400, opt-parser=false, enabled=true, img-url=https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/United_States.png


[filter_remote]
# å‚æ•°ã€Œtagã€ã€ã€Œforce-policyã€å’Œã€Œenabledã€æ˜¯å¯é€‰çš„ã€‚
# å½“æœ‰å¼ºåˆ¶ç­–ç•¥æ—¶ï¼Œè¿œç¨‹èµ„æºçš„è¿‡æ»¤å™¨ä¸­çš„ç­–ç•¥å°†è¢«å¿½ç•¥ï¼Œå¹¶ä½¿ç”¨å¼ºåˆ¶ç­–ç•¥ã€‚

;FILTER_LAN, tag=LAN, force-policy=direct, enabled=true
;FILTER_REGION, tag=CN, force-policy=direct, enabled=true
;https://raw.githubusercontent.com/crossutility/Quantumult-X/master/filter.snippet, tag=Sample, force-policy=your-policy-name, enabled=true
;https://example.com/filter.snippet, tag=Sample, force-policy=your-policy-name, require-devices=ID1, ID2, enabled=true

# è‡ªå®šä¹‰ç›´è¿åˆ—è¡¨
https://cdn.jsdelivr.net/gh/SilentBreeze/Profiles@main/QuantumultX/Direct/domain.snippet, tag=âœ…CustomDirect, force-policy=direct, update-interval=172800, opt-parser=true, enabled=true

# ç§æœ‰ç½‘ç»œä¸“ç”¨åŸŸååˆ—è¡¨
https://cdn.jsdelivr.net/gh/Loyalsoldier/surge-rules@release/ruleset/private.txt, tag=ğŸ”‚Private, force-policy=direct, update-interval=172800, opt-parser=true, enabled=true

# å¹¿å‘ŠåŸŸååˆ—è¡¨1
https://cdn.jsdelivr.net/gh/Loyalsoldier/surge-rules@release/ruleset/reject.txt, tag=ğŸ›¡Advertising1, force-policy=reject, update-interval=172800, opt-parser=true, enabled=true

# å¹¿å‘ŠåŸŸååˆ—è¡¨2
https://cdn.jsdelivr.net/gh/privacy-protection-tools/anti-AD@master/anti-ad-surge2.txt, tag=ğŸ›¡Advertising2, force-policy=reject, update-interval=172800, opt-parser=true, enabled=true

# iCloud åŸŸååˆ—è¡¨
https://cdn.jsdelivr.net/gh/Loyalsoldier/surge-rules@release/ruleset/icloud.txt, tag=â˜ï¸iCloud, force-policy=direct, update-interval=172800, opt-parser=true, enabled=true

# Apple åœ¨ä¸­å›½å¤§é™†å¯ç›´è¿çš„åŸŸååˆ—è¡¨
https://cdn.jsdelivr.net/gh/Loyalsoldier/surge-rules@release/ruleset/apple.txt, tag=ï£¿Apple, force-policy=direct, update-interval=172800, opt-parser=true, enabled=true

# Google åœ¨ä¸­å›½å¤§é™†å¯ç›´è¿çš„åŸŸååˆ—è¡¨ [æ…ç”¨]
https://cdn.jsdelivr.net/gh/Loyalsoldier/surge-rules@release/ruleset/google.txt, tag=ğŸ‡¨ğŸ‡³GoogleCN, force-policy=direct, update-interval=172800, opt-parser=true, enabled=true

# ä»£ç†åŸŸååˆ—è¡¨
https://cdn.jsdelivr.net/gh/Loyalsoldier/surge-rules@release/ruleset/proxy.txt, tag=ğŸ‡ºğŸ‡³Proxy, force-policy=ğŸ‡ºğŸ‡³Proxy, update-interval=172800, opt-parser=true, enabled=true

# ç›´è¿åŸŸååˆ—è¡¨
https://cdn.jsdelivr.net/gh/Loyalsoldier/surge-rules@release/ruleset/direct.txt, tag=ğŸ”€Direct, force-policy=direct, update-interval=172800, opt-parser=true, enabled=true

# éä¸­å›½å¤§é™†ä½¿ç”¨çš„é¡¶çº§åŸŸååˆ—è¡¨
https://cdn.jsdelivr.net/gh/Loyalsoldier/surge-rules@release/ruleset/tld-not-cn.txt, tag=ğŸ‡ºğŸ‡³TLD_NOT_CN, force-policy=ğŸ‡ºğŸ‡³Proxy, update-interval=172800, opt-parser=true, enabled=false

# GFWList åŸŸååˆ—è¡¨
https://cdn.jsdelivr.net/gh/Loyalsoldier/surge-rules@release/ruleset/gfw.txt, tag=ğŸ‡ºğŸ‡³GFWList, force-policy=ğŸ‡ºğŸ‡³Proxy, update-interval=172800, opt-parser=true, enabled=false

# Greatfire åŸŸååˆ—è¡¨
https://cdn.jsdelivr.net/gh/Loyalsoldier/surge-rules@release/ruleset/greatfire.txt, tag=ğŸ‡ºğŸ‡³Greatfire, force-policy=ğŸ‡ºğŸ‡³Proxy, update-interval=172800, opt-parser=true, enabled=false

# Telegram ä½¿ç”¨çš„ IP åœ°å€åˆ—è¡¨
https://cdn.jsdelivr.net/gh/Loyalsoldier/surge-rules@release/ruleset/telegramcidr.txt, tag=ğŸ“¨Telegram, force-policy=ğŸ‡ºğŸ‡³Proxy, update-interval=172800, opt-parser=true, enabled=true

# ä¸­å›½å¤§é™† IP åœ°å€åˆ—è¡¨
https://cdn.jsdelivr.net/gh/Loyalsoldier/surge-rules@release/ruleset/cncidr.txt, tag=ğŸ‡¨ğŸ‡³China, force-policy=direct, update-interval=172800, opt-parser=true, enabled=true


[rewrite_remote]
# å‚æ•°ã€Œtagã€å’Œã€Œenabledã€æ˜¯å¯é€‰çš„ã€‚

;https://raw.githubusercontent.com/crossutility/Quantumult-X/master/sample-import-rewrite.snippet, tag=Sample, enabled=true
;https://example.com/rewrite.snippet, tag=Sample, require-devices=ID1, ID2, enabled=true


[server_local]
# åªæœ‰ obfs=http, obfs=ws, obfs=ws, obfs=wss å¯ä»¥æœ‰å¯é€‰çš„ã€Œobfs-uriã€å­—æ®µã€‚
# wss ä¸­çš„ obfs-host å‚æ•°å°†ç”¨äº TLS æ¡æ‰‹å’Œ HTTP å¤´ä¸»æœºå­—æ®µï¼Œå¦‚æœæ²¡æœ‰ä¸º wss è®¾ç½® obfs-hostï¼Œåˆ™å°†ä½¿ç”¨æœåŠ¡å™¨åœ°å€ã€‚
# å½“ä½¿ç”¨ obfs=ws å’Œ obfs=wss æ—¶ï¼ŒæœåŠ¡å™¨ç«¯å¯ä»¥é€šè¿‡å¸¦æœ‰ mux=0 çš„ v2ray-plugin æˆ– v2ray-core è¿›è¡Œéƒ¨ç½²ã€‚
# å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œshadowsocks çš„ udp-over-tcp åªæœ‰éƒ¨ç½²äº† shadowsocksr python ç‰ˆæœ¬çš„æœåŠ¡å™¨æ‰æ”¯æŒï¼Œå…¶ä»–ç‰ˆæœ¬åªæ”¯æŒ UDP ä¸­ç»§æœ¬èº«ã€‚å¦‚æœæ‚¨å°† udp-relay å’Œ udp-over-tcp ç”¨äº shadowsocksï¼Œåˆ™å¿…é¡»ç¡®ä¿æ‚¨çš„æœåŠ¡å™¨éƒ¨ç½²äº† shadowsocksr python ç‰ˆæœ¬ã€‚
# å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œobfs=tls ä¸ obfs=over-tls ä¸åŒã€‚ obfs=tls æ˜¯ shadowsocks é¡¹ç›®ç›¸å…³çš„æ··æ·†æ’ä»¶ï¼Œåªæ˜¯å¯¹ TLS åè®®çš„æ··æ·†ã€‚ obfs=over-tls æ˜¯ TLS åè®®ã€‚ Quantumult X æ”¯æŒå®ƒä»¬ä¸¤è€…çš„ shadowsocksã€‚
# obfs plugin tls1.2 ticket auth æ¯” tls1.2 ticket fastauth å’Œ obfs tls å¤šä¸€ä¸ª RTTï¼Œä½ æœ€å¥½ä½¿ç”¨ tls1.2 ticket fastauthã€‚
# chacha20-ietf-poly1305 å’Œ chacha20-poly1305 åœ¨ VMess é…ç½®ä¸­å…·æœ‰ç›¸åŒçš„æ•ˆæœã€‚
# ç”¨äº SSL pinning çš„ tls-cert-sha256 æˆ– tls-pubkey-sha256 å¯ä»¥ç”± openssl ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç”Ÿæˆï¼š
# openssl x509 -noout -fingerprint -sha256 -inform pem -in your-cert.pem
# openssl x509 -inform pem -pubkey -noout < your-cert.pem | openssl pkey -pubin -outform der | openssl dgst -sha256
# å¦‚æœ tls-verification ä¸º falseï¼Œåˆ™ tls-cert-sha256 å’Œ tls-pubkey-sha256 å°†è¢«å¿½ç•¥ã€‚
# å¦‚æœè®¾ç½®äº† tls-pubkey-sha256ï¼Œåˆ™ tls-cert-sha256 å°†è¢«å¿½ç•¥ã€‚
# tls13 å‚æ•°å·²è¢«å¼ƒç”¨ï¼ˆè‡ª v1.0.26 èµ·å·²å¼ƒç”¨ï¼‰ï¼Œæ— è®ºæ‚¨è®¾ç½®ä»€ä¹ˆï¼Œå§‹ç»ˆæ”¯æŒ TLS ç‰ˆæœ¬ 1.3ã€‚

;shadowsocks=example.com:80, method=chacha20, password=pwd, obfs=http, obfs-host=bing.com, obfs-uri=/resource/file, fast-open=false, udp-relay=false, server_check_url=http://www.apple.com/generate_204, tag=ss-obfs-http-01
;shadowsocks=example.com:80, method=chacha20, password=pwd, obfs=http, obfs-host=bing.com, obfs-uri=/resource/file, fast-open=false, udp-relay=false, tag=ss-obfs-http-02
;shadowsocks=example.com:443, method=chacha20, password=pwd, obfs=tls, obfs-host=bing.com, fast-open=false, udp-relay=false, tag=ss-obfs-tls-01
;shadowsocks=example.com:443, method=chacha20, password=pwd, obfs=over-tls, obfs-host=bing.com, tls-verification=true, tls-cert-sha256=b0088370d6c8e02d6e38c443abf81be2aaf1e18f00435aaf0b39852c338f7aaa, fast-open=false, udp-relay=false, tag=ss-tls-01
;shadowsocks=example.com:443, method=chacha20, password=pwd, obfs=over-tls, obfs-host=bing.com, tls-verification=true, tls-pubkey-sha256=eb5ec6684564fd0d04975903ed75342d1b9fdc2096ea54b4cf8caf4740f4ae25, fast-open=false, udp-relay=false, tag=ss-tls-02
;shadowsocks=example.com:443, method=chacha20, password=pwd, ssr-protocol=auth_chain_b, ssr-protocol-param=def, obfs=tls1.2_ticket_fastauth, obfs-host=bing.com, tag=ssr
;shadowsocks=example.com:80, method=aes-128-gcm, password=pwd, obfs=ws, fast-open=false, udp-relay=false, tag=ss-ws-01
;shadowsocks=example.com:80, method=aes-128-gcm, password=pwd, obfs=ws, obfs-uri=/ws, fast-open=false, udp-relay=false, tag=ss-ws-02
;shadowsocks=example.com:443, method=aes-128-gcm, password=pwd, obfs=wss, obfs-uri=/ws, fast-open=false, udp-relay=false, tag=ss-ws-tls-01
;shadowsocks=example.com:443, method=aes-128-gcm, password=pwd, obfs=wss, obfs-uri=/ws, tls13=true, fast-open=false, udp-relay=false, tag=ss-ws-tls-02
;shadowsocks=example.com:80, method=chacha20, password=pwd, fast-open=false, udp-relay=true, udp-over-tcp=true, tag=ss-udp-over-tcp

# è¦ç¦ç”¨ vmess çš„ aead æ ‡å¤´ï¼Œåªéœ€è®¾ç½® aead=falseï¼Œé»˜è®¤å€¼ä¸º trueã€‚å¦‚æœæ‚¨çš„æœåŠ¡å™¨ï¼ˆV2Rayï¼‰ç‰ˆæœ¬ä½äº v4.28 è¯·è®¾ç½® aead=false
;vmess=example.com:80, method=none, password=23ad6b10-8d1a-40f7-8ad0-e3e35cd32291, fast-open=false, udp-relay=false, tag=vmess-01
;vmess=example.com:80, method=aes-128-gcm, password=23ad6b10-8d1a-40f7-8ad0-e3e35cd32291, fast-open=false, udp-relay=false, aead=false, tag=vmess-02
;vmess=example.com:443, method=none, password=23ad6b10-8d1a-40f7-8ad0-e3e35cd32291, obfs=over-tls, fast-open=false, udp-relay=false, tag=vmess-tls-01
;vmess=example.com:80, method=chacha20-poly1305, password=23ad6b10-8d1a-40f7-8ad0-e3e35cd32291, obfs=http, obfs-host=bing.com, obfs-uri=/resource/file, fast-open=false, udp-relay=false, server_check_url=http://www.apple.com/generate_204, tag=vmess-http
;vmess=192.168.1.1:443, method=none, password=23ad6b10-8d1a-40f7-8ad0-e3e35cd32291, obfs=over-tls, obfs-host=example.com, fast-open=false, udp-relay=false, tag=vmess-tls-02
;vmess=192.168.1.1:443, method=none, password=23ad6b10-8d1a-40f7-8ad0-e3e35cd32291, obfs=over-tls, obfs-host=example.com, tls13=true, fast-open=false, udp-relay=false, tag=vmess-tls-03
;vmess=example.com:80, method=chacha20-poly1305, password=23ad6b10-8d1a-40f7-8ad0-e3e35cd32291, obfs=ws, obfs-uri=/ws, fast-open=false, udp-relay=false, tag=vmess-ws-01
;vmess=192.168.1.1:80, method=chacha20-poly1305, password=23ad6b10-8d1a-40f7-8ad0-e3e35cd32291, obfs=ws, obfs-host=example.com, obfs-uri=/ws, fast-open=false, udp-relay=false, tag=vmess-ws-02
;vmess=example.com:443, method=chacha20-poly1305, password=23ad6b10-8d1a-40f7-8ad0-e3e35cd32291, obfs=wss, obfs-uri=/ws, fast-open=false, udp-relay=false, tag=vmess-ws-tls-01
;vmess=192.168.1.1:443, method=chacha20-poly1305, password=23ad6b10-8d1a-40f7-8ad0-e3e35cd32291, obfs=wss, obfs-host=example.com, obfs-uri=/ws, fast-open=false, udp-relay=false, tag=vmess-ws-tls-02
;vmess=192.168.1.1:443, method=chacha20-poly1305, password=23ad6b10-8d1a-40f7-8ad0-e3e35cd32291, obfs=wss, obfs-host=example.com, obfs-uri=/ws, tls13=true, fast-open=false, udp-relay=false, tag=vmess-ws-tls-03

# http ä¸æ”¯æŒ obfs å­—æ®µ
;http=example.com:80,fast-open=false, udp-relay=false, tag=http-01
;http=example.com:80, username=name, password=pwd, fast-open=false, udp-relay=false, tag=http-02
;http=example.com:443, username=name, password=pwd, over-tls=true, tls-host=example.com, tls-verification=true, fast-open=false, udp-relay=false, tag=http-tls-01
;http=example.com:443, username=name, password=pwd, over-tls=true, tls-host=example.com, tls-verification=true, tls-pubkey-sha256=eb5ec6684564fd0d04975903ed75342d1b9fdc2096ea54b4cf8caf4740f4ae25, fast-open=false, udp-relay=false, tag=http-tls-02

;socks5=example.com:80,fast-open=false, udp-relay=false, tag=socks5-01
;socks5=example.com:80, username=name, password=pwd, fast-open=false, udp-relay=false, tag=socks5-02
;socks5=example.com:443, username=name, password=pwd, over-tls=true, tls-host=example.com, tls-verification=true, fast-open=false, udp-relay=false, tag=socks5-tls-01
;socks5=example.com:443, username=name, password=pwd, over-tls=true, tls-host=example.com, tls-verification=true, tls-pubkey-sha256=eb5ec6684564fd0d04975903ed75342d1b9fdc2096ea54b4cf8caf4740f4ae25, fast-open=false, udp-relay=false, tag=socks5-tls-02

# obfs å­—æ®µä»…æ”¯æŒ trojan çš„ websocket over tls. åœ¨ tls ä¸Šä½¿ç”¨ websocket æ—¶ï¼Œæ‚¨ä¸åº”å†è®¾ç½® over-tls å’Œ tls-host é€‰é¡¹ï¼Œè€Œæ˜¯è®¾ç½® obfs=wss å’Œ obfs-host é€‰é¡¹ã€‚
;trojan=example.com:443, password=pwd, over-tls=true, tls-verification=true, fast-open=false, udp-relay=false, tag=trojan-tls-01
;trojan=example.com:443, password=pwd, over-tls=true, tls-verification=true, tls13=true, fast-open=false, udp-relay=false, tag=trojan-tls-02
;trojan=192.168.1.1:443, password=pwd, over-tls=true, tls-host=example.com, tls-verification=true, fast-open=false, udp-relay=false, tag=trojan-tls-03
;trojan=192.168.1.1:443, password=pwd, over-tls=true, tls-host=example.com, tls-verification=true, tls13=true, fast-open=false, udp-relay=false, tag=trojan-tls-04
;trojan=192.168.1.1:443, password=pwd, over-tls=true, tls-host=example.com, tls-verification=true, tls-cert-sha256=b0088370d6c8e02d6e38c443abf81be2aaf1e18f00435aaf0b39852c338f7aaa, tls13=true, fast-open=false, udp-relay=false, tag=trojan-tls-05
;trojan=192.168.1.1:443, password=pwd, over-tls=true, tls-host=example.com, tls-verification=true, tls-pubkey-sha256=eb5ec6684564fd0d04975903ed75342d1b9fdc2096ea54b4cf8caf4740f4ae25, tls13=true, fast-open=false, udp-relay=false, tag=trojan-tls-06
;trojan=192.168.1.1:443, password=pwd, obfs=wss, obfs-host=example.com, obfs-uri=/path, udp-relay=true, tag=trojan-wss-05

[filter_local]
;user-agent, ?abc*, proxy
;host, www.google.com, proxy
;host-keyword, adsite, reject
;host-suffix, googleapis.com, proxy
;host-suffix, googleapis.com, proxy, force-cellular
;host-suffix, googleapis.com, proxy, multi-interface
;host-suffix, googleapis.com, proxy, multi-interface-balance
;host-suffix, googleapis.com, proxy, via-interface=pdp_ip0
;ip6-cidr, 2001:4860:4860::8888/32, direct
;ip-cidr, 224.0.0.0/24, direct
;geoip, cn, direct, force-cellular
host-suffix, local, direct
ip-cidr, 192.168.0.0/16, direct
ip-cidr, 10.0.0.0/8, direct
ip-cidr, 172.16.0.0/12, direct
ip-cidr, 127.0.0.0/8, direct
ip-cidr, 100.64.0.0/10, direct
ip-cidr, 224.0.0.0/4, direct
ip6-cidr, fe80::/10, direct
geoip, cn, direct
final, proxy


[rewrite_local]
# The "reject" returns HTTP status code 404 with no content. This type of rewrite has some kind of dynamic delay (0~5 seconds) mechanism of response for repeated requests in a short period of time. The less the repetition, the shorter the delay (0). The more the repetition, the greater the delay (5).
# The "reject-200" returns HTTP status code 200 with no content.
# The "reject-img" returns HTTP status code 200 with content of 1px gif.
# The "reject-dict" returns HTTP status code 200 with content of empty json object.
# The "reject-array" returns HTTP status code 200 with content of empty json array.
# The "request-header" works for all the http headers not just one single header, so you can match two or more headers including CRLF in one regular expression.
# The "echo-response" just reply back the body of the content type response for matched URL, the body file should be saved at "On My iPhone - Quantumult X - Data".
# The length and encoding related HTTP header fields will be automatically processed by Quantumult if the "rewrite" is body related, so you should not handle them by yourself. The max supported original response body size is 4 MB(iOS 13+) for script-response-body.
# The body related rewrite will not be executed if the body is empty.
# When using javascript in rewrite, you can use those objects: $request, $response, $notify(title, subtitle, message), console.log(message) and Quantumult's built-in objects all have prefix "$".
# Supports: $request.sessionIndex, $request.scheme, $request.method, $request.url, $request.path, $request.headers,$response.sessionIndex, $response.statusCode, $response.headers, $response.body
# The $request.sessionIndex is equal to $response.sessionIndex when the response is related to the request. The sessionIndex has nothing to do with the index of TCP records in the orange "Activity" panel.
# The $notify(title, subtitle, message) will post iOS notifications if Quantumult notification has been enabled.
# The $prefs is for persistent store: $prefs.valueForKey(key), $prefs.setValueForKey(value, key), $prefs.removeValueForKey(key), $prefs.removeAllValues().
# The console.log(message)  will output logs to Quantumult log file.
# The setTimeout(function() { }, interval) will run function after interval(ms).
# The scripts for script-request-header, script-request-body, script-response-header, script-response-body, script-echo-response and script-analyze-echo-response should be saved in local "On My iPhone - Quantumult X - Scripts" or "iCloud Drive - Quantumult X - Scripts". Samples can be found at https://github.com/crossutility/Quantumult-X
# The difference between script-analyze-echo-response and script-echo-response is that the former will wait for the request body.

;^http://example\.com/resource1/1/ url reject
;^http://example\.com/resource1/2/ url reject-img
;^http://example\.com/resource1/3/ url reject-200
;^http://example\.com/resource1/4/ url reject-dict
;^http://example\.com/resource1/5/ url reject-array
;^http://example\.com/resource2/ url 302 http://example.com/new-resource2/
;^http://example\.com/resource3/ url 307 http://example.com/new-resource3/
;^http://example\.com/resource4/ url request-header ^GET /resource4/ HTTP/1\.1(\r\n) request-header GET /api/ HTTP/1.1$1
;^http://example\.com/resource4/ url request-header (\r\n)User-Agent:.+(\r\n) request-header $1User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/71.0.3578.98 Safari/537.36$2
;^http://example\.com/resource5/ url request-body "info":\[.+\],"others" request-body "info":[],"others"
;^http://example\.com/resource5/ url response-body "info":\[.+\],"others" response-body "info":[],"others"
;^http://example\.com/resource5/ url echo-response text/html echo-response index.html
;^http://example\.com/resource6/ url script-response-body response-body.js
;^http://example\.com/resource7/ url script-echo-response script-echo.js
;^http://example\.com/resource8/ url script-response-header response-header.js
;^http://example\.com/resource9/ url script-request-header request-header.js
;^http://example\.com/resource10/ url script-request-body request-body.js


[task_local]
# å¦‚æœè®¾ç½®äº†require-devicesï¼Œè¿™è¡Œé…ç½®åªä¼šåœ¨å½“å‰Quantumultè®¾å¤‡IDå±äºrequire-devicesæ—¶åŠ è½½ã€‚ Quantumult è®¾å¤‡ ID å¯åœ¨â€œè®¾ç½® -å…¶ä»–è®¾ç½® -å…³äºâ€ä¸­æ‰¾åˆ°ã€‚
# $task.fetch() ç»„æˆä¸€ä¸ª HTTP è¯·æ±‚å¹¶å¤„ç†å“åº”ï¼Œåªæ”¯æŒ text bodyã€‚å¦‚æœæ‚¨æƒ³è¦ serial requests è€Œä¸æ˜¯ current requestsï¼Œå¯ä»¥å°† $task.fetch() åµŒå…¥åˆ°å¦ä¸€ä¸ª $task.fetch() çš„å®Œæˆå¤„ç†ç¨‹åºä¸­ã€‚
# è„šæœ¬åº”ä¿å­˜åœ¨æœ¬åœ°ã€Œæˆ‘çš„ iPhone - Quantumult X - Scriptsã€æˆ–ã€ŒiCloud Drive - Quantumult X - Scriptsã€ä¸­ã€‚ç¤ºä¾‹ï¼šhttps://github.com/crossutility/Quantumult-X/blob/master/sample-task.js
# é»˜è®¤çš„ HTTP è¯·æ±‚è¶…æ—¶æ˜¯ 10 ç§’ã€‚
# æ”¯æŒ 5 æˆ– 6 ä¸ª cron å­—æ®µï¼Œä¸åŒ…æ‹¬å‘½ä»¤å­—æ®µã€‚ event-network å°†åœ¨ç½‘ç»œæ›´æ”¹æ—¶è§¦å‘ã€‚å½“ç”¨æˆ·ç‚¹å‡» UIAction æ—¶å°†è§¦å‘äº‹ä»¶äº¤äº’ã€‚åªæœ‰åœ¨ Quantumult X Tunnel è¿è¡Œæ—¶æ‰èƒ½è§¦å‘äº‹ä»¶ç›¸å…³ä»»åŠ¡ã€‚

;* * * * * sample-task.js
;* * * * * sample-task2.js, img-url=https://raw.githubusercontent.com/crossutility/Quantumult-X/master/quantumult-x.png, tag=Sample, enabled=true
;* * * * * sample-task3.js, img-url=https://raw.githubusercontent.com/crossutility/Quantumult-X/master/quantumult-x.png, tag=Sample, require-devices=ID1, ID2, enabled=true
;event-network sample-task3.js
;event-interaction sample-task4.js
event-interaction https://cdn.jsdelivr.net/gh/KOP-XIAO/QuantumultX@master/Scripts/streaming-ui-check.js, tag=ğŸ“ºæµåª’ä½“æœåŠ¡æŸ¥è¯¢, img-url=checkmark.seal.system, enabled=true

[http_backend]
# éƒ¨ç½²ä¸€ä¸ªæœ¬åœ° HTTP æœåŠ¡å™¨ï¼Œå¹¶ä½¿ç”¨ JavaScript è¿›è¡Œæ•°æ®å¤„ç†ã€‚
# å¦‚æœè®¾ç½®äº† require-devicesï¼Œåˆ™ä»…å½“å½“å‰ Quantumult è®¾å¤‡ ID å±äº require-devices æ—¶æ‰ä¼šåŠ è½½æ­¤è¡Œé…ç½®ã€‚ Quantumult è®¾å¤‡ ID å¯åœ¨â€œè®¾ç½® -å…¶ä»–è®¾ç½® -å…³äºâ€ä¸­æ‰¾åˆ°ã€‚
# è¾“å…¥å˜é‡ä¸ºï¼š$reqeust.urlã€$reqeust.pathã€$reqeust.headersã€$reqeust.bodyã€‚
# ä½¿ç”¨ $done è¾“å‡ºåƒ $done({status:"HTTP/1.1 200 OK"}, headers:{}, body:"here is a string") è¿™æ ·çš„è¿”å›å“åº”ã€‚
# æ­¤å¤–ï¼Œæ‚¨è¿˜å¯ä»¥ä½¿ç”¨ç­¾åæˆ–ä»»ä½•å…¶ä»–éªŒè¯æ–¹æ³•æ¥éªŒè¯è¯·æ±‚æ˜¯å¦åˆæ³•ã€‚
# éƒ¨ç½²åæ‚¨åº”è¯¥é€šè¿‡ http://127.0.0.1:9999/your-path/your-api/. è¿›è¡Œè®¿é—®ã€‚æœåŠ¡å™¨é»˜è®¤ç›‘å¬ç«¯å£ä¸º 9999ï¼Œæ‚¨å¯ä»¥åœ¨UIä¸­è¿›è¡Œæ›´æ”¹ã€‚

;https://raw.githubusercontent.com/crossutility/Quantumult-X/master/sample-backend.js, tag=fileConverter, path=^/example/v1/
;preference.js, tag=userPreference, path=^/preference/v1/, img-url=https://example.com, enabled=true
;sample.js, tag=sample, path=^/sample/v1/, require-devices=ID1, ID2, enabled=true
;convert.js, tag=fileConverter, path=^/convert/v1/


[mitm]
# åªæœ‰ã€Œhostnameã€ä¸­çš„ TLS SNI æˆ–ç›®æ ‡åœ°å€å°†è¢« MitM å¤„ç†ã€‚
# é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“ä¸º HTTPS è¯·æ±‚å¯ç”¨ MitM æ—¶ï¼ŒQuantumult X ä¼šä»åŸç«™ç‚¹è·å–è¯ä¹¦ï¼ˆè¯ä¹¦ä¼šè¢«ç¼“å­˜ï¼‰ï¼Œä¿ç•™å¤§éƒ¨åˆ†éœ€è¦çš„åŸå§‹è¯ä¹¦ä¿¡æ¯ï¼Œå¹¶ä½¿ç”¨ MitM çš„ root CA é‡æ–°ç­¾åï¼Œè¿™æ˜¯æ¨èçš„ï¼ˆä¹Ÿæ˜¯æ¯”è¾ƒå…¼å®¹çš„ï¼‰MitM è¯ä¹¦åˆ›å»ºæ–¹å¼ã€‚
# å¶å°”æœ‰äº›ç”¨æˆ·å–œæ¬¢è°ƒè¯• HTTPS è¯·æ±‚ï¼Œå…¶åŸŸåä¸å­˜åœ¨ï¼Œæ‰€ä»¥åŸè¯ä¹¦æ ¹æœ¬ä¸å­˜åœ¨ã€‚å½“å‚æ•° simple_cert_hostname å‡ºç°çš„æ—¶å€™ã€‚å…¶ TLS SNI åç§°åœ¨ simple_cert_hostname(åŠ hostname) ä¸­çš„ HTTPS è¯·æ±‚å°†ä½¿ç”¨çº¯æœ¬åœ°ç”Ÿæˆçš„ MitM è¯ä¹¦ã€‚
# æ³¨æ„ï¼ï¼ï¼æ‚¨åº”è¯¥å§‹ç»ˆä¿æŠ¤æ‚¨çš„ CA å¯†ç å’Œ p12 çš„ç§å¯†æ€§ã€‚

;passphrase =
;p12 =
;skip_validating_cert = false
;force_sni_domain_name = false
;hostname = *.example.com, *.sample.com, non-existed-domain.com, *.non-connected-domain.com
;simple_cert_hostname = non-existed-domain.com, *.non-connected-domain.com
